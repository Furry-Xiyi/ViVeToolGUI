<Page
    x:Class="ViVeToolGUI.QueryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:local="using:ViVeToolGUI">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Padding="40,40,40,20" Spacing="16">
            <TextBlock x:Uid="Query_Title" 
                      Style="{StaticResource TitleTextBlockStyle}"/>

            <TextBlock x:Uid="Query_Description" 
                      Style="{StaticResource BodyTextBlockStyle}"
                      TextWrapping="Wrap"
                      Opacity="0.7"/>

            <StackPanel Orientation="Horizontal" Spacing="12">
                <Button x:Name="QueryAllButton" 
                       x:Uid="Query_QueryAllButton"
                       Style="{StaticResource AccentButtonStyle}"
                       Click="QueryAllButton_Click">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE721;" FontSize="16"/>
                        <TextBlock x:Uid="Query_QueryAllButtonText"/>
                    </StackPanel>
                </Button>

                <Button x:Name="ExportButton" 
                       x:Uid="Query_ExportButton"
                       Click="ExportButton_Click"
                       IsEnabled="False">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE74E;" FontSize="16"/>
                        <TextBlock x:Uid="Query_ExportButtonText"/>
                    </StackPanel>
                </Button>

                <TextBox x:Name="SearchBox" 
                        x:Uid="Query_SearchBox"
                        Width="300"
                        TextChanged="SearchBox_TextChanged"/>
            </StackPanel>

            <muxc:ProgressBar x:Name="QueryProgressBar" 
                             IsIndeterminate="True"
                             Visibility="Collapsed"/>
        </StackPanel>

        <ScrollViewer Grid.Row="1" Padding="40,0,40,40">
            <Border BorderThickness="1" 
                   BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                   Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                   CornerRadius="8">
                <ListView x:Name="FeaturesListView"
                         SelectionMode="Single">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="local:FeatureInfo">
                            <Grid Padding="12" ColumnSpacing="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="120"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" 
                                          Text="{Binding Id}" 
                                          FontFamily="Consolas"
                                          VerticalAlignment="Center"/>

                                <TextBlock Grid.Column="1" 
                                          Text="{Binding Priority}" 
                                          VerticalAlignment="Center"/>

                                <TextBlock Grid.Column="2" 
                                          Text="{Binding State}" 
                                          VerticalAlignment="Center"/>

                                <TextBlock Grid.Column="3" 
                                          Text="{Binding Type}" 
                                          VerticalAlignment="Center"/>

                                <TextBlock Grid.Column="4" 
                                          Text="{Binding Name}" 
                                          VerticalAlignment="Center"
                                          TextTrimming="CharacterEllipsis"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                    <ListView.Header>
                        <Grid Padding="12" 
                             Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}"
                             ColumnSpacing="12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" 
                                      x:Uid="Query_HeaderID" 
                                      FontWeight="SemiBold"/>
                            <TextBlock Grid.Column="1" 
                                      x:Uid="Query_HeaderPriority" 
                                      FontWeight="SemiBold"/>
                            <TextBlock Grid.Column="2" 
                                      x:Uid="Query_HeaderState" 
                                      FontWeight="SemiBold"/>
                            <TextBlock Grid.Column="3" 
                                      x:Uid="Query_HeaderType" 
                                      FontWeight="SemiBold"/>
                            <TextBlock Grid.Column="4" 
                                      x:Uid="Query_HeaderName" 
                                      FontWeight="SemiBold"/>
                        </Grid>
                    </ListView.Header>
                </ListView>
            </Border>
        </ScrollViewer>
    </Grid>
</Page>